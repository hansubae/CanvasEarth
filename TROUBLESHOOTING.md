# ë¬¸ì œ í•´ê²° ë¡œê·¸ (Troubleshooting Log)

ì´ íŒŒì¼ì€ í”„ë¡œì íŠ¸ ê°œë°œ ì¤‘ ë°œìƒí•œ ë¬¸ì œì™€ í•´ê²° ë°©ë²•ì„ ê¸°ë¡í•©ë‹ˆë‹¤.

---

## 2025-12-01: YouTube ì‡¼ì¸  URL ì •ê·œì‹ ìº¡ì²˜ ê·¸ë£¹ ì˜¤ë¥˜

### ğŸ“‹ ë¬¸ì œ ìƒí™©
- YouTube ì˜¤ë¸Œì íŠ¸ê°€ ìˆëŠ” ìª½ìœ¼ë¡œ í™”ë©´ì„ ë“œë˜ê·¸í•˜ë©´ í™”ë©´ì´ í•˜ì–€ìƒ‰ìœ¼ë¡œ ë³€í•¨
- Console ì—ëŸ¬:
  ```
  Uncaught TypeError: Cannot read properties of undefined (reading 'length')
  The above error occurred in the <YouTubeObject> component
  ```

### ğŸ” ì›ì¸ ë¶„ì„

#### 1. ì´ˆê¸° ìƒíƒœ
YouTube ì‡¼ì¸  ì§€ì›ì„ ì¶”ê°€í•˜ê¸° ìœ„í•´ ì •ê·œì‹ì— `(shorts\/)` ìº¡ì²˜ ê·¸ë£¹ì„ ì¶”ê°€:

```typescript
// Before
/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/
//                                                               ^^^^^^^^^ match[7]

// After (ë²„ê·¸ ë°œìƒ)
/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(shorts\/)|(watch\?))\??v?=?([^#&?]*).*/
//                                              ^^^^^^^^^ ì¶”ê°€             ^^^^^^^^^ match[8]ë¡œ ì´ë™!
```

#### 2. ë¬¸ì œ ë°œìƒ ë©”ì»¤ë‹ˆì¦˜
- ì •ê·œì‹ì—ì„œ `()`ë¡œ ê°ì‹¸ì§„ ë¶€ë¶„ì€ **ìº¡ì²˜ ê·¸ë£¹**ìœ¼ë¡œ, ë§¤ì¹­ ê²°ê³¼ê°€ ë°°ì—´ì˜ ì¸ë±ìŠ¤ë¡œ ì €ì¥ë¨
- `(shorts\/)` ê·¸ë£¹ ì¶”ê°€ë¡œ ì „ì²´ ìº¡ì²˜ ê·¸ë£¹ ê°œìˆ˜ê°€ ì¦ê°€
- ë¹„ë””ì˜¤ IDì˜ ìœ„ì¹˜ê°€ **match[7] â†’ match[8]**ë¡œ ë³€ê²½ë¨
- ì½”ë“œëŠ” ì—¬ì „íˆ `match[7].length`ë¥¼ ì°¸ì¡°

#### 3. URLë³„ ë™ì‘
**ì¼ë°˜ ë¹„ë””ì˜¤** (`https://www.youtube.com/watch?v=dQw4w9WgXcQ`):
```javascript
match[7] = "watch?"        // íŒ¨í„´ ë§¤ì¹­ ê²°ê³¼
match[8] = "dQw4w9WgXcQ"   // ë¹„ë””ì˜¤ ID
// match[7].lengthëŠ” 6 â†’ ì¡°ê±´ ì‹¤íŒ¨ â†’ null ë°˜í™˜
```

**ì‡¼ì¸  ë¹„ë””ì˜¤** (`https://www.youtube.com/shorts/abc12345678`):
```javascript
match[7] = undefined       // ë§¤ì¹­ëœ ê·¸ë£¹ ì—†ìŒ
match[8] = "abc12345678"   // ë¹„ë””ì˜¤ ID
// match[7].length â†’ TypeError: Cannot read properties of undefined
```

### âœ… í•´ê²° ë°©ë²•

**ë¹„ìº¡ì²˜ ê·¸ë£¹ `(?:...)`** ì‚¬ìš©ìœ¼ë¡œ ì¸ë±ìŠ¤ ê³ ì •:

```typescript
// Fixed
/^.*(?:youtu\.be\/|v\/|\/u\/\w\/|embed\/|shorts\/|watch\?v=)([^#&?]*).*/
//   ^^^ ë¹„ìº¡ì²˜ ê·¸ë£¹: ê·¸ë£¹í™”ëŠ” í•˜ì§€ë§Œ ìº¡ì²˜í•˜ì§€ ì•ŠìŒ

// ê²°ê³¼: ë¹„ë””ì˜¤ IDê°€ í•­ìƒ match[1]ì— ìœ„ì¹˜
const match = url.match(regExp);
return match && match[1] && match[1].length === 11 ? match[1] : null;
```

**ë¹„ìº¡ì²˜ ê·¸ë£¹ì˜ ì¥ì :**
- íŒ¨í„´ ê·¸ë£¹í™”ëŠ” ìœ ì§€í•˜ë˜, ìº¡ì²˜ ë°°ì—´ì— í¬í•¨ë˜ì§€ ì•ŠìŒ
- ì¸ë±ìŠ¤ ë²ˆí˜¸ë¥¼ ì°¨ì§€í•˜ì§€ ì•ŠìŒ
- ì„±ëŠ¥ìƒ ì•½ê°„ ë” íš¨ìœ¨ì  (ìº¡ì²˜ ì‘ì—… ìƒëµ)

### ğŸ“ ìˆ˜ì •ëœ íŒŒì¼
- `frontend/src/components/InfiniteCanvas.tsx` (line 13-20)
- `frontend/src/components/CanvasObject.tsx` (line 55-63)

### ğŸ§ª í…ŒìŠ¤íŠ¸ ê²°ê³¼
ëª¨ë“  YouTube URL í˜•ì‹ì—ì„œ ì •ìƒ ì‘ë™ í™•ì¸:
- âœ… `youtube.com/watch?v=VIDEO_ID`
- âœ… `youtube.com/shorts/VIDEO_ID`
- âœ… `youtu.be/VIDEO_ID`
- âœ… `youtube.com/embed/VIDEO_ID`

### ğŸ“š êµí›ˆ
1. ì •ê·œì‹ì— ìƒˆ ìº¡ì²˜ ê·¸ë£¹ì„ ì¶”ê°€í•  ë•ŒëŠ” ê¸°ì¡´ ì¸ë±ìŠ¤ ì°¸ì¡°ì— ì˜í–¥ì„ ì¤Œ
2. ê·¸ë£¹í™”ë§Œ í•„ìš”í•˜ê³  ê°’ì„ ìº¡ì²˜í•  í•„ìš”ê°€ ì—†ë‹¤ë©´ **ë¹„ìº¡ì²˜ ê·¸ë£¹ `(?:...)`** ì‚¬ìš©
3. ì •ê·œì‹ ë³€ê²½ í›„ì—ëŠ” ëª¨ë“  ì¼€ì´ìŠ¤ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ í•„ìˆ˜

---
